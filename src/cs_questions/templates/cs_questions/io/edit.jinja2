{% extends "cs_questions/base.jinja2" %}

{% block style %}
<style>
    #answer-keys {
        min-width: 75%;
        margin: 20px auto;
        border: 2px solid darkgrey;
        boder-radius: 2px;
    }
    #answer-keys .first-col {
        padding-right: 35%;
    }
    #answer-keys th {
        background: darkgray;
        color: white;
    }
    #answer-keys tr:nth-child(even) {
        background: #eee;
    }
</style>
{% endblock %}

{% block content %}
    <section>
    <h1>{{ question.title }}</h1>
    <h3>{{ _('Edit question ') }}</h3>
      {% if can_download_question and download_url %}
      <a id href="download/" title="{{ _('Download Markio file') }}">&crarr;</a>
      {% endif %}
    </h1>
    </section>

    <div class="question-input">
        <form method="POST" id="edit-form">
            {% csrf_token %}
            <table>{{ form.as_table() }}</table>
        </form>

        <div>
            <h2>{{ _('Edit Answer Keys') }}</h2>
            <table id="answer-keys">
                <thead>
                    <tr>
                        <th class="first-col">{{ _('Language') }}</th>
                        <th>{{ _('Is valid') }}</th>
                        <th>{{ _('Source?') }}</th>
                        <th>{{ _('Placeholder?') }}</th>
                        <th>{{ _('Edit') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for key in question.answer_keys.all() %}
                        <tr>
                            <td>{{ key.language }}</td>
                            <td>{{ key.is_valid|icon }}</td>
                            <td>{{ (key.source != '')|icon }}</td>
                            <td>{{ (key.placeholder != '')|icon }}</td>
                            <td>
                                <i class="material-icons"
                                   onclick="srvice.dialog({
                                           url: '../edit-key/' + {{ key.pk}}
                                       })">edit</i>
                            </td>
                        </tr>
                    {% endfor %}
                    {% if add_button %}
                        <tr>
                            <td>{{ _('Add new') }}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <i class="material-icons"
                                       onclick="srvice.dialog({
                                               url: '../add-key/'
                                           })">add</i>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="button-banner">
        <input  type="submit"
                name="send"
                value="{{ _('Send') }}"
                onclick="$('#question-input')[0].submit()">
    </div>
{% endblock %}